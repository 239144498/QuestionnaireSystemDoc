# 后端概要设计-V1.0

> 备注：基础功能概要设计

|  作者   | 版本号 | 日期 | 变更说明
|  ----  | ----   | ---- | ----  |
| 吉忠晟  | V1.0 |2020.05.14|新建、根据需求梳理模块|


## 1. 用户管理模块

### 1.1 需求描述

1. 用户可以使用邮箱来注册账号，账号有性别、年龄、昵称项，其中昵称项必填
2. 用户发布问卷之前需要先登入账号
3. 用户可以注销自己的账号
4. 用户有性别、年龄、昵称项可进行修改

对应需求：用户注册、用户登录、用户注销、用户信息修改

### 1.2 方案设计

用户鉴权：通过cookie存储用户名进行用户鉴权（1day过期）

邮箱验证：通过发送邮箱验证码进行验证，通过cookie暂存（10min过期）

登录验证码：通过cookie暂存登录验证码（10min过期）

提供用户信息修改API

提供用户注册API

提供邮箱验证码获取API

提供登录验证码获取API

提供用户登入API

提供用户注销API

#### 1.2.1 用户注册UML时序图

![](https://raw.githubusercontent.com/Wh1isper/QuestionnaireSystemDoc/master/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/img/%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8CUML%E6%97%B6%E5%BA%8F.png)

#### 1.2.2 用户登录/注销UML时序图

![](https://raw.githubusercontent.com/Wh1isper/QuestionnaireSystemDoc/master/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/img/%E7%94%A8%E6%88%B7%E7%99%BB%E5%85%A5_%E6%B3%A8%E9%94%80UML%E6%97%B6%E5%BA%8F.png)

### 1.3 接口设计

## 2. 问卷管理模块

### 2.1 需求描述

用户通过浏览器编辑创建问卷并发布

问卷状态有三种：未发布、发布、停止，对于未发布问卷，仅用有人可见；对于已发布问卷，对所有人可见；对停止问卷，所有人都不能修改，但可见。

问卷题型有：单选题、多选题、填空题，问卷有结束时间

题目关联：当选择某选项之后才会出现

题目跳转：当选择某选项之后自动跳转至下一选项

对应需求：创建问卷、删除问卷、发布问卷

### 2.2 方案设计

提供问卷创建API

提供删除问卷API

提供发布问卷API

### 2.3 接口设计

## 3. 答卷及统计模块

### 3.1 需求描述

每个问卷有每个问卷有专门的回答页面，任何人都可以进行回答

用户需要实时查看目前回答情况，统计信息，支持导出

问卷时间结束，或人为结束之后，用户可以导出所有问卷（以表格形式）

对应需求：问卷提交、问卷结果统计

### 3.2 方案设计

提供针对问卷的答题API

提供针对问卷答题情况查询、统计的API

### 3.3 接口设计