* [测试报告\-V1\.0](#%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A-v10)
  * [0\. 测试环境](#0-%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83)
  * [1\. 后端单元测试](#1-%E5%90%8E%E7%AB%AF%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95)
    * [用例执行情况](#%E7%94%A8%E4%BE%8B%E6%89%A7%E8%A1%8C%E6%83%85%E5%86%B5)
    * [测试结果](#%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C)
    * [测试分析](#%E6%B5%8B%E8%AF%95%E5%88%86%E6%9E%90)
  * [2\. 集成测试](#2-%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95)
    * [用例执行情况](#%E7%94%A8%E4%BE%8B%E6%89%A7%E8%A1%8C%E6%83%85%E5%86%B5-1)
    * [测试结果](#%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C-1)
    * [测试分析](#%E6%B5%8B%E8%AF%95%E5%88%86%E6%9E%90-1)
  * [3\. 性能测试](#3-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95)
    * [测试内容](#%E6%B5%8B%E8%AF%95%E5%86%85%E5%AE%B9)
      * [问卷查看性能（GET）](#%E9%97%AE%E5%8D%B7%E6%9F%A5%E7%9C%8B%E6%80%A7%E8%83%BDget)
      * [问卷提交性能（POST）](#%E9%97%AE%E5%8D%B7%E6%8F%90%E4%BA%A4%E6%80%A7%E8%83%BDpost)
    * [测试结果](#%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C-2)
      * [问卷查看性能（GET）](#%E9%97%AE%E5%8D%B7%E6%9F%A5%E7%9C%8B%E6%80%A7%E8%83%BDget-1)
    * [测试分析](#%E6%B5%8B%E8%AF%95%E5%88%86%E6%9E%90-2)
  * [4\. 测试结论](#4-%E6%B5%8B%E8%AF%95%E7%BB%93%E8%AE%BA)

# 测试报告-V1.0



> 备注：包括后端单元测试、集成测试以及性能测试



| 作者   | 版本号 | 日期       | 变更说明                  |
| ------ | ------ | ---------- | ------------------------- |
| 吉忠晟 | V1.0   | 2020.07.03 | 新建 输出后端模块测试报告 |

## 0. 测试环境

功能测试：Windows10开发机器 MySQL8.0 Python3.7

性能测试：CentOS7部署机器 1核1G VMware虚拟机 MySQL8.0 Python3.7

## 1. 后端单元测试

后端开发采取敏捷开发模式，按照功能划分提前编写了单元测试用例

### 用例执行情况

以下用例由后端负责人[@吉忠晟](https://github.com/Wh1isper)编写执行，最近一次执行时间为7月3日

| 所属模块     | 功能点                  | 测试结果 |
| ------------ | ----------------------- | -------- |
| 管理员模块   | 管理员登录验证逻辑      | 通过     |
|              | 管理员封禁/解封用户逻辑 | 通过     |
|              | 管理员删除问卷逻辑      | 通过     |
|              | 管理员获取用户列表      | 通过     |
|              | 管理员获取问卷列表      | 通过     |
|              | API权限审查             | 通过     |
| 验证码模块   | 邮箱验证码              | 通过     |
|              | 登录验证码              | 通过     |
| 问卷管理模块 | 问卷创建逻辑            | 通过     |
|              | 问卷删除逻辑            | 通过     |
|              | 问卷获取逻辑            | 通过     |
|              | 问卷发布/结束/删除逻辑  | 通过     |
|              | 问卷提交逻辑            | 通过     |
|              | 问卷统计逻辑            | 通过     |
|              | 问卷保存逻辑            | 通过     |
|              | 问卷信息逻辑            | 通过     |
|              | 问卷重命名逻辑          | 通过     |
|              | 用户问卷列表获取逻辑    | 通过     |
| 用户管理模块 | 用户注册逻辑            | 通过     |
|              | 用户登录逻辑            | 通过     |
|              | 用户信息修改逻辑        | 通过     |
|              | 用户注册逻辑            | 通过     |
|              | 用户密码修改逻辑        | 通过     |

### 测试结果

| 用例数 | 行覆盖率 | 分支覆盖率 | 遗留bug |
| ------ | -------- | ---------- | ------- |
| 32     | ~90%     | ~60%       | 0       |

行覆盖率、分支覆盖率满足要求

未覆盖分支中，50%为防御性设计，50%暂未编写用例，将在集成测试中测试

### 测试分析

后端单元测试以白盒测试为主，确保主流程走通。同时，针对高危漏洞、程序异常崩溃原因进行排查，确保后端权限授予、问卷状态更改不存在逻辑漏洞；针对缺陷预防，收集出错概率高的模块，在集成测试中重点测试。

单元测试在用例上仍存在不足，分支覆盖率并没有达到很高，这是由于后端防御性设计以及权限控制冗余设计造成的。后端在开发的过程中对于一些不可达情况也做了设计，但没有体现在测试用例中。在之后的开发中需要逐渐新增用例，不断提高覆盖率。



## 2. 集成测试

继承测试采用手动测试的方式，前后端联调之后进行

### 用例执行情况

测试用例参考了需求分析中的User Case，同时对详细设计中的边界情况进行重点测试

以下用例由前端负责人[@谢韦杭](https://github.com/JellyBeanXiewh)执行，最近一次执行时间为7月3日

| 用例                                                         | 执行情况       |
| ------------------------------------------------------------ | -------------- |
| [用户注册](https://github.com/Wh1isper/QuestionnaireSystemDoc/tree/master/%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3#%E4%B8%80%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C) | 成功           |
| [用户登录](https://github.com/Wh1isper/QuestionnaireSystemDoc/tree/master/%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3#%E4%BA%8C%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95) | 成功           |
| [用户注销](https://github.com/Wh1isper/QuestionnaireSystemDoc/tree/master/%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3#%E4%B8%89%E7%94%A8%E6%88%B7%E6%B3%A8%E9%94%80) | 成功           |
| [用户信息修改](https://github.com/Wh1isper/QuestionnaireSystemDoc/tree/master/%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3#%E5%9B%9B%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E4%BF%AE%E6%94%B9) | 失败（未实装） |
| [设计问卷](https://github.com/Wh1isper/QuestionnaireSystemDoc/tree/master/%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3#%E4%BA%94%E8%AE%BE%E8%AE%A1%E9%97%AE%E5%8D%B7) | 成功           |
| [创建问卷](https://github.com/Wh1isper/QuestionnaireSystemDoc/tree/master/%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3#%E5%85%AD%E5%88%9B%E5%BB%BA%E9%97%AE%E5%8D%B7) | 成功           |
| [问卷提交](https://github.com/Wh1isper/QuestionnaireSystemDoc/tree/master/%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3#%E4%B8%83%E9%97%AE%E5%8D%B7%E6%8F%90%E4%BA%A4) | 成功           |
| [问卷管理查看](https://github.com/Wh1isper/QuestionnaireSystemDoc/tree/master/%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3#%E5%85%AB%E9%97%AE%E5%8D%B7%E7%AE%A1%E7%90%86%E6%9F%A5%E7%9C%8B) | 成功           |
| [问卷管理删除](https://github.com/Wh1isper/QuestionnaireSystemDoc/tree/master/%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3#%E4%B9%9D%E9%97%AE%E5%8D%B7%E7%AE%A1%E7%90%86%E5%88%A0%E9%99%A4) | 成功           |
| [管理员功能](https://github.com/Wh1isper/QuestionnaireSystemDoc/tree/master/%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3#%E5%8D%81%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E5%91%98%E7%B3%BB%E7%BB%9F%E5%88%86%E9%85%8D%E7%9A%84%E4%B8%80%E4%B8%AAadmin%E8%B4%A6%E6%88%B7%E7%94%A8%E6%9D%A5%E7%AE%A1%E7%90%86%E5%85%B6%E4%BB%96%E7%94%A8%E6%88%B7) | 成功           |

### 测试结果

| 用例数 | 行覆盖率 | 分支覆盖率 | 遗留bug |
| ------ | -------- | ---------- | ------- |
| 10     | ~90%     | ~80%       | 0       |

### 测试分析

集成测试以黑盒测试为主，测试User Case执行是否符合预期；同时，集成测试对各种可能出现的边界情况进行了测试，如越权访问等行为，经测试、修复，暂无遗留bug。

目前集成测试未有安全测试部分内容，可能存在安全风险，如xsrf问题等

## 3. 性能测试

### 测试内容

#### 问卷查看性能（GET）

- 总10000访问，2000并发（2k测试）
- 总100000访问，10000并发（10k测试）
- 总100000访问，20000并发（20k测试）

#### 问卷提交性能（POST）

视SQL性能，暂时空缺

### 测试结果

#### 问卷查看性能（GET）

总10000访问，2000并发（2k测试）

![https://raw.githubusercontent.com/Wh1isper/QuestionnaireSystemDoc/master/%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/test-GET-10k-2k.png](https://raw.githubusercontent.com/Wh1isper/QuestionnaireSystemDoc/master/测试报告/性能测试结果/test-GET-10k-2k.png)

总100000访问，10000并发（10k测试）

![https://raw.githubusercontent.com/Wh1isper/QuestionnaireSystemDoc/master/%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/test-GET-100k-10k.png](https://raw.githubusercontent.com/Wh1isper/QuestionnaireSystemDoc/master/测试报告/性能测试结果/test-GET-100k-10k.png)

总100000访问，20000并发（20k测试）

![https://raw.githubusercontent.com/Wh1isper/QuestionnaireSystemDoc/master/%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/test-GET-100k-10k.png](https://raw.githubusercontent.com/Wh1isper/QuestionnaireSystemDoc/master/测试报告/性能测试结果/test-GET-100k-20k.png)

### 测试分析

总体：每秒处理160个请求以上≈500万PV/每天

- 2k测试：无压力，0错误，90%-19秒响应时间

- 10k测试：高可用，5%错误，响应明显变慢

- 20k测试：30%错误，可用性一般

## 4. 测试结论

本次一共进行三轮测试，未有遗留缺陷，测试共执行42个用例，代码行覆盖率超过90%，分支覆盖率超过80%。性能测试结果表明，服务器性能优越，可以承载500PV/每天的访问量，性能强于同类产品。

本次测试中缺少安全测试，在安全上可能存在一定风险；缺少问卷提交性能测试，这方面主要依赖数据库性能，根据数据库支持表现不一致，由于环境原因暂时没有测试。

**测试对象整体质量： A**

| A：质量稳定，可大规模使用。                       |
| ------------------------------------------------- |
| B：存在少数非严重问题，但有规避措施，可局部使用。 |
| C：基本功能可用，但存在较少严重问题。             |
| D：基本功能不可用。                               |